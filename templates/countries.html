<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pacific Island Countries</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<nav class="navbar">
  <div class="nav-title">Pacific Dashboard</div>
  <div class="nav-links">
    <a href="/">Overview</a>
    <a class="active" href="/countries">Countries</a>
  </div>
</nav>

<div class="container">
  <h1>Pacific Island Countries</h1>
  <p class="muted">Click a country to view detailed PFM, PEFA, and good practices data.</p>

  <!-- JSON data (keeps VS Code JS linter happy) -->
  <script type="application/json" id="map-data">{{ map_data | tojson }}</script>

  <div class="map-card">
    <div class="map-legend" aria-label="Legend">
      <div class="legend-title">Score Bands</div>
      <div class="legend-row"><span class="legend-swatch band-very-strong"></span>Very Strong</div>
      <div class="legend-row"><span class="legend-swatch band-strong"></span>Strong</div>
      <div class="legend-row"><span class="legend-swatch band-moderate"></span>Moderate</div>
      <div class="legend-row"><span class="legend-swatch band-weak"></span>Weak</div>
      <div class="legend-row"><span class="legend-swatch band-na"></span>N/A</div>
    </div>

    <div id="tooltip" class="map-tooltip" role="tooltip" aria-hidden="true"></div>

    <div class="map-wrap" id="pacific-map-wrap">
      <svg id="pacific-map" viewBox="0 0 1400 650" preserveAspectRatio="xMidYMid meet" aria-label="Pacific Countries Map" role="img" xmlns="http://www.w3.org/2000/svg">
<g id="map-layer">
  <path id="PNG" class="country" d="M413.84,316.23 L412.57,317.53 L409.98,314.16 L408.75,305.53 L402.09,296.12 L395.25,293.00 L381.32,283.22 L375.83,281.68 L377.21,281.23 L377.19,278.84 L384.06,283.93 L397.87,290.46 L414.72,305.09 L416.70,309.31 L413.84,316.23 Z M395.86,308.36 L399.31,306.91 L404.25,309.11 L403.32,317.36 L401.72,319.62 L397.53,320.47 L397.02,321.67 L399.75,326.51 L398.62,328.25 L395.00,330.07 L389.00,329.86 L384.11,336.15 L371.16,342.04 L357.10,342.50 L352.48,338.86 L347.63,339.53 L341.12,335.25 L335.68,333.50 L334.58,331.86 L336.20,328.48 L345.92,328.70 L352.08,330.40 L360.17,329.38 L362.42,328.07 L364.60,320.60 L365.97,321.61 L364.30,325.70 L366.19,329.37 L378.47,328.06 L385.77,319.72 L391.67,318.40 L389.50,308.40 L390.34,306.71 L395.86,308.36 Z M208.53,390.93 L208.51,353.03 L206.58,350.20 L208.51,343.45 L208.48,279.47 L212.11,279.78 L241.56,291.64 L251.90,293.53 L261.44,299.94 L268.49,300.28 L278.94,309.25 L283.16,309.87 L290.57,317.37 L290.19,327.29 L312.27,336.14 L318.13,336.68 L321.39,338.50 L325.42,342.92 L326.16,348.87 L313.72,349.88 L310.89,351.81 L314.94,361.12 L324.08,369.66 L330.98,373.55 L333.03,381.27 L336.53,383.67 L338.79,389.78 L349.33,389.43 L350.44,397.42 L363.24,400.68 L358.97,402.70 L360.90,406.25 L369.29,409.27 L377.60,410.06 L373.96,411.81 L370.69,411.29 L371.43,413.31 L374.14,414.89 L368.53,417.24 L363.34,415.91 L358.84,412.07 L324.84,407.22 L321.15,404.52 L318.67,400.45 L311.98,395.54 L310.40,393.13 L311.06,389.92 L309.22,390.40 L305.36,388.06 L295.13,373.08 L276.98,368.39 L275.11,365.46 L269.04,364.37 L267.69,366.28 L262.75,367.62 L258.57,366.19 L254.40,362.53 L259.32,370.82 L257.58,370.78 L258.39,372.08 L257.45,372.27 L252.06,371.79 L253.69,375.21 L244.81,377.10 L235.03,377.28 L232.01,374.64 L229.60,375.13 L231.63,375.17 L234.19,378.10 L239.72,377.68 L245.10,379.90 L249.64,384.83 L249.45,388.23 L237.14,394.51 L229.99,391.81 L219.58,392.52 L215.88,391.48 L211.22,392.69 L208.53,390.93 Z M329.25,334.55 L325.06,331.14 L325.29,328.83 L329.74,330.87 L329.25,334.55 Z M294.89,315.71 L293.74,316.22 L292.56,314.71 L294.48,312.51 L294.89,315.71 Z M408.79,288.44 L408.37,289.94 L406.61,287.79 L408.24,286.88 L408.79,288.44 Z M399.00,285.25 L398.29,286.06 L396.53,283.93 L396.87,283.51 L399.00,285.25 Z M359.04,261.37 L357.42,261.77 L355.28,259.98 L355.88,257.95 L358.35,259.28 L359.04,261.37 Z M381.57,406.37 L385.26,405.28 L384.13,409.36 L379.48,407.61 L376.34,401.04 L381.57,406.37 Z M368.97,397.36 L364.93,395.10 L366.62,392.43 L368.54,393.42 L368.97,397.36 Z M382.01,384.33 L382.30,385.56 L380.97,384.25 L381.60,381.51 L380.26,380.74 L382.19,378.95 L382.01,384.33 Z M436.36,429.34 L433.63,430.44 L431.95,429.11 L433.57,429.41 L433.30,428.48 L436.36,429.34 Z M253.23,380.02 L249.47,378.91 L248.70,378.07 L253.14,378.47 L253.23,380.02 Z M314.70,327.80 L311.78,325.66 L313.93,323.67 L315.21,324.71 L314.70,327.80 Z M312.84,268.34 L318.95,268.93 L319.18,270.04 L315.21,272.14 L307.36,271.58 L303.92,272.60 L305.79,268.58 L312.84,268.34 Z M370.53,280.36 L365.89,280.33 L362.40,277.14 L366.94,275.61 L370.41,277.08 L370.53,280.36 Z M372.10,394.83 L376.56,396.06 L378.36,400.33 L370.53,399.59 L371.76,398.08 L370.54,395.06 L372.10,394.83 Z M408.11,388.20 L411.18,388.34 L413.62,390.10 L413.86,392.48 L409.64,391.75 L406.13,389.07 L408.11,388.20 Z M423.61,431.30 L427.44,433.19 L423.91,433.95 L419.34,432.00 L419.95,431.22 L417.92,428.70 L423.61,431.30 Z M253.29,382.62 L253.60,383.37 L246.73,379.03 L250.78,380.66 L253.29,382.62 Z M326.70,273.87 L326.14,274.78 L324.28,274.43 L325.99,273.25 L326.70,273.87 Z M396.57,283.24 L396.16,283.25 L396.39,281.16 L397.50,282.88 L396.57,283.24 Z M378.45,415.70 L378.20,417.04 L376.51,416.36 L376.74,415.51 L378.45,415.70 Z M425.72,304.98 L425.56,305.38 L424.56,304.92 L425.78,303.98 L425.72,304.98 Z M465.08,349.29 L464.35,351.17 L461.00,352.30 L454.57,349.88 L452.25,346.55 L452.14,342.79 L444.56,336.35 L444.04,328.01 L450.28,331.02 L456.67,340.01 L462.76,344.04 L465.08,349.29 Z M442.64,327.81 L440.80,322.30 L442.39,320.64 L444.01,324.13 L442.64,327.81 Z"></path>
  <path id="PLW" class="country" d="M40.64,182.96 L40.00,182.97 L40.03,182.73 L40.91,182.45 L40.64,182.96 Z M99.26,108.36 L98.22,108.73 L97.89,105.90 L100.21,102.71 L99.26,108.36 Z"></path>
  <path id="FSM" class="country" d="M585.39,143.58 L585.56,144.41 L584.32,143.71 L584.96,143.42 L585.39,143.58 Z M160.00,72.08 L158.71,73.48 L160.74,70.50 L160.00,72.08 Z M391.27,108.98 L391.13,109.20 L389.94,108.99 L390.96,108.22 L391.27,108.98 Z M395.27,107.51 L395.00,106.92 L395.77,107.03 L395.81,107.13 L395.27,107.51 Z M505.44,118.10 L503.19,118.31 L502.36,115.85 L505.10,115.74 L505.44,118.10 Z"></path>
  <path id="MHL" class="country" d="M699.30,134.94 L698.53,135.42 L699.57,132.97 L701.00,131.79 L699.30,134.94 Z M685.51,109.61 L685.26,109.88 L682.86,109.39 L682.93,109.15 L685.51,109.61 Z M732.56,114.08 L734.46,114.42 L735.63,115.37 L733.19,114.78 L732.56,114.08 Z M724.42,112.54 L726.56,113.42 L729.41,113.01 L726.70,113.73 L723.28,112.23 L724.42,112.54 Z M652.29,43.79 L651.85,43.90 L651.51,43.78 L652.26,43.52 L652.29,43.79 Z"></path>
  <path id="NRU" class="country" d="M653.46,243.62 L653.13,244.21 L652.58,243.75 L653.13,243.16 L653.46,243.62 Z"></path>
  <path id="KIR" class="country" d="M756.40,181.19 L755.31,181.76 L754.99,181.67 L756.28,180.86 L756.40,181.19 Z M754.25,182.53 L752.99,183.19 L752.65,182.84 L754.99,182.14 L754.25,182.53 Z M757.24,203.17 L757.32,203.57 L755.80,201.49 L756.39,202.02 L757.24,203.17 Z M757.42,205.37 L756.80,205.44 L757.32,203.79 L757.69,204.95 L757.42,205.37 Z M757.48,217.43 L758.40,218.11 L756.77,220.47 L758.03,218.29 L756.75,217.22 L757.48,217.43 Z M782.75,248.51 L782.20,248.97 L780.57,244.91 L782.17,245.77 L782.75,248.51 Z M787.28,255.53 L787.38,256.41 L786.32,254.19 L786.79,254.43 L787.28,255.53 Z M757.58,211.80 L757.11,211.86 L759.86,211.23 L759.71,211.53 L757.58,211.80 Z M697.86,249.74 L697.38,249.60 L697.42,249.38 L697.93,249.45 L697.86,249.74 Z M1010.11,312.03 L1010.22,312.15 L1010.69,312.09 L1010.40,311.70 L1010.11,312.03 Z M1029.45,288.47 L1029.25,288.50 L1029.41,288.12 L1029.52,288.21 L1029.45,288.47 Z M1026.92,311.21 L1026.55,311.26 L1026.43,310.97 L1026.81,310.88 L1026.92,311.21 Z M970.75,314.84 L970.96,315.17 L970.28,314.53 L970.44,314.57 L970.75,314.84 Z M1305.65,304.78 L1305.00,304.49 L1304.65,304.10 L1305.74,303.81 L1305.65,304.78 Z M1360.00,430.70 L1359.59,430.88 L1359.47,429.86 L1359.65,429.87 L1360.00,430.70 Z M1290.11,331.13 L1289.25,331.22 L1289.00,330.81 L1289.97,330.87 L1290.11,331.13 Z M1264.80,203.00 L1267.64,204.98 L1260.74,202.21 L1263.19,203.14 L1264.40,201.45 L1262.23,200.03 L1263.09,200.10 L1265.14,201.07 L1264.80,203.00 Z M1230.60,167.59 L1231.96,169.03 L1231.70,169.76 L1229.40,168.45 L1230.60,167.59 Z M1018.97,282.15 L1019.96,282.92 L1020.15,283.68 L1018.99,283.17 L1019.98,283.53 L1018.97,282.15 Z"></path>
  <path id="TUV" class="country" d="M863.33,380.75 L863.02,380.93 L863.14,379.76 L863.38,380.59 L863.33,380.75 Z"></path>
  <path id="SLB" class="country" d="M528.95,380.47 L526.92,380.08 L526.65,378.61 L528.16,378.87 L528.95,380.47 Z M652.96,434.54 L650.85,434.75 L649.85,433.26 L651.70,433.06 L652.96,434.54 Z M639.33,419.00 L635.40,420.60 L633.47,419.46 L637.46,417.34 L639.82,417.89 L639.33,419.00 Z M544.17,436.81 L541.89,437.10 L538.93,434.52 L534.36,433.07 L534.07,431.62 L544.17,436.81 Z M560.81,399.61 L560.91,402.08 L558.44,400.57 L557.66,394.95 L560.81,399.61 Z M520.40,391.01 L518.39,390.78 L517.80,390.18 L519.40,388.78 L521.09,389.41 L520.40,391.01 Z M537.18,388.82 L538.64,389.02 L541.28,391.30 L539.03,391.79 L536.10,390.28 L537.18,388.82 Z M496.00,375.92 L498.31,380.44 L496.96,382.25 L492.99,379.40 L492.48,376.40 L488.11,377.48 L486.65,376.27 L491.33,371.19 L493.18,371.88 L494.08,375.49 L496.00,375.92 Z M503.49,385.85 L502.71,385.23 L503.65,383.39 L504.39,385.43 L503.49,385.85 Z M501.90,383.49 L498.98,384.38 L498.50,381.46 L501.86,380.97 L501.90,383.49 Z M489.59,383.99 L486.56,381.45 L489.43,378.98 L488.62,382.92 L489.59,383.99 Z M477.58,370.46 L474.55,366.77 L475.41,364.48 L479.66,367.03 L477.58,370.46 Z M476.14,374.71 L475.04,373.02 L475.57,371.07 L476.29,373.42 L476.14,374.71 Z M485.87,373.63 L483.63,373.79 L482.21,372.02 L483.34,369.51 L486.11,370.77 L485.87,373.63 Z M463.06,356.31 L461.34,356.72 L460.28,356.17 L461.33,354.19 L463.48,355.39 L463.06,356.31 Z M493.98,384.77 L492.96,385.18 L490.69,383.86 L492.85,383.82 L493.98,384.77 Z M530.03,393.57 L533.80,396.32 L540.37,396.12 L545.01,398.98 L548.32,403.67 L545.42,404.80 L530.92,401.97 L527.66,396.96 L527.89,394.23 L530.03,393.57 Z M532.23,380.92 L516.22,372.47 L510.27,367.65 L507.88,363.98 L512.63,365.00 L519.05,370.12 L524.56,372.27 L531.61,377.37 L530.77,378.73 L532.23,380.92 Z M491.26,360.31 L490.48,361.94 L484.67,360.19 L474.28,350.57 L473.55,348.46 L476.15,348.50 L483.44,352.80 L486.24,357.40 L491.26,360.31 Z M547.13,377.15 L551.38,382.25 L550.47,385.46 L554.14,388.24 L557.72,399.37 L549.26,391.58 L547.52,388.28 L545.65,382.40 L546.53,381.01 L544.41,378.16 L547.13,377.15 Z M563.67,412.66 L570.35,413.79 L574.94,420.12 L564.90,418.30 L560.64,415.72 L559.76,412.21 L556.46,411.61 L556.64,409.52 L563.67,412.66 Z"></path>
  <path id="VUT" class="country" d="M649.82,488.68 L650.92,494.34 L652.86,494.03 L653.95,490.62 L655.47,490.54 L657.61,499.23 L655.78,501.59 L650.03,502.45 L647.85,498.60 L648.14,495.27 L646.08,489.08 L646.76,485.51 L649.82,488.68 Z M661.24,510.41 L665.84,513.23 L668.50,516.47 L661.87,518.27 L660.15,511.42 L656.77,510.15 L657.59,506.80 L659.92,507.34 L661.24,510.41 Z M678.95,522.11 L679.18,523.07 L674.40,522.54 L673.61,519.68 L674.71,518.94 L678.95,522.11 Z M676.38,514.53 L671.67,514.18 L670.08,512.69 L674.10,510.17 L676.38,514.53 Z M678.93,535.18 L681.31,537.81 L680.28,539.56 L674.01,538.06 L675.97,535.35 L678.93,535.18 Z M669.78,499.11 L668.63,499.90 L665.72,499.38 L668.32,496.99 L671.34,496.50 L669.78,499.11 Z M674.94,508.26 L673.40,503.30 L674.04,499.55 L675.88,506.93 L674.94,508.26 Z M674.54,497.27 L674.24,498.33 L673.26,491.45 L674.50,495.02 L674.54,497.27 Z M657.92,504.05 L655.79,503.38 L656.21,502.31 L658.19,502.69 L657.92,504.05 Z M664.19,478.99 L661.54,479.57 L661.21,477.90 L662.84,476.96 L664.43,477.67 L664.19,478.99 Z M662.54,472.93 L660.88,470.90 L662.41,469.55 L663.65,471.34 L662.54,472.93 Z M703.77,580.46 L703.17,581.41 L701.05,580.73 L702.63,579.75 L703.77,580.46 Z M696.83,569.39 L695.93,571.25 L694.37,570.82 L692.15,568.30 L692.66,566.05 L694.19,565.78 L694.59,567.98 L696.83,569.39 Z M694.15,559.12 L692.67,559.86 L688.20,557.94 L688.69,554.04 L690.88,553.83 L694.15,559.12 Z"></path>
  <path id="FJI" class="country" d="M876.78,511.66 L869.33,519.68 L869.40,521.57 L875.60,517.67 L875.56,521.52 L866.85,522.58 L863.13,520.97 L859.78,524.19 L854.64,525.49 L852.88,522.48 L851.06,522.26 L852.54,519.42 L856.33,519.58 L858.99,517.04 L865.82,515.28 L869.11,513.05 L876.78,511.66 Z M847.34,532.26 L852.67,537.05 L853.98,544.40 L841.78,547.54 L830.92,544.35 L829.94,540.68 L832.66,538.52 L832.28,536.71 L834.06,535.13 L839.42,532.55 L845.75,531.25 L847.34,532.26 Z M877.22,524.61 L876.79,522.22 L879.17,520.56 L879.83,521.88 L877.22,524.61 Z M876.79,525.26 L875.03,525.28 L876.79,522.23 L876.78,523.48 L876.79,525.26 Z M850.90,559.70 L848.69,560.92 L847.47,560.21 L845.32,562.22 L841.83,562.23 L848.27,559.02 L850.90,559.70 Z M894.12,542.62 L893.24,542.82 L892.56,542.06 L893.10,541.66 L894.12,542.62 Z M897.99,547.02 L897.79,547.34 L896.52,546.48 L897.97,546.30 L897.99,547.02 Z M906.74,542.21 L905.79,542.39 L904.92,541.66 L906.24,541.07 L906.74,542.21 Z M894.66,530.57 L893.85,530.95 L893.83,528.43 L895.37,529.71 L894.66,530.57 Z M901.88,562.99 L900.83,562.74 L900.95,562.18 L901.51,562.08 L901.88,562.99 Z M880.22,559.12 L880.26,559.63 L879.10,560.12 L879.25,559.17 L880.22,559.12 Z M829.43,528.41 L828.55,528.70 L830.34,526.73 L830.14,527.69 L829.43,528.41 Z M866.90,532.18 L866.33,532.64 L866.06,530.28 L867.08,530.55 L866.90,532.18 Z M865.65,544.77 L864.01,543.54 L864.91,542.06 L865.87,544.14 L865.65,544.77 Z M856.71,538.38 L855.34,537.64 L856.02,536.59 L856.77,536.49 L856.71,538.38 Z M878.00,517.38 L876.79,518.02 L878.49,516.16 L878.00,517.38 Z M877.54,511.33 L876.79,511.65 L877.31,510.93 L877.54,511.33 Z M876.79,518.02 L876.53,517.71 L876.79,517.14 L876.79,518.02 Z M827.50,448.93 L826.83,449.10 L825.52,448.68 L827.44,448.53 L827.50,448.93 Z M784.83,606.29 L784.20,606.42 L784.10,606.04 L784.39,605.82 L784.83,606.29 Z M898.85,588.70 L898.55,588.57 L898.58,588.32 L898.72,588.44 L898.85,588.70 Z"></path>
  <path id="TON" class="country" d="M959.64,597.29 L961.07,596.60 L959.73,598.91 L956.21,596.22 L956.97,595.56 L959.64,597.29 Z M980.33,553.97 L979.69,554.98 L978.35,553.98 L980.08,552.70 L980.33,553.97 Z M963.90,599.54 L963.81,602.11 L962.88,600.38 L963.90,599.54 Z"></path>
  <path id="WSM" class="country" d="M1008.08,465.36 L1010.76,469.12 L1009.93,471.17 L1004.61,470.95 L1000.46,466.25 L1008.08,465.36 Z M1023.14,475.32 L1015.30,474.55 L1013.00,472.07 L1016.22,471.22 L1020.57,472.45 L1023.14,475.32 Z"></path>
  <path id="COK" class="country" d="M1223.72,598.66 L1222.03,598.47 L1221.98,598.32 L1223.25,597.62 L1223.72,598.66 Z"></path>
  <path id="NIU" class="country" d="M1051.40,561.57 L1049.68,562.50 L1048.92,561.39 L1050.88,559.56 L1051.40,561.57 Z"></path>
  <g id="labels" pointer-events="none">
    <text class="country-label" x="665.9" y="512.6" text-anchor="middle" dominant-baseline="middle">VUT</text>
    <text class="country-label" x="418.5" y="107.2" text-anchor="middle" dominant-baseline="middle">FSM</text>
    <text class="country-label" x="711.4" y="114.8" text-anchor="middle" dominant-baseline="middle">MHL</text>
    <text class="country-label" x="965.7" y="584.6" text-anchor="middle" dominant-baseline="middle">TON</text>
    <text class="country-label" x="528.0" y="387.6" text-anchor="middle" dominant-baseline="middle">SLB</text>
    <text class="country-label" x="1011.0" y="470.3" text-anchor="middle" dominant-baseline="middle">WSM</text>
    <text class="country-label" x="281.0" y="345.5" text-anchor="middle" dominant-baseline="middle">PNG</text>
    <text class="country-label" x="96.1" y="110.0" text-anchor="middle" dominant-baseline="middle">PLW</text>
    <text class="country-label" x="1050.3" y="561.0" text-anchor="middle" dominant-baseline="middle">NIU</text>
    <text class="country-label" x="1222.9" y="598.1" text-anchor="middle" dominant-baseline="middle">COK</text>
    <text class="country-label" x="653.0" y="243.7" text-anchor="middle" dominant-baseline="middle">NRU</text>
    <text class="country-label" x="1082.7" y="220.1" text-anchor="middle" dominant-baseline="middle">KIR</text>
    <text class="country-label" x="851.2" y="533.2" text-anchor="middle" dominant-baseline="middle">FJI</text>
    <text class="country-label" x="863.2" y="380.4" text-anchor="middle" dominant-baseline="middle">TUV</text>
  </g>
</g></svg>
    </div>
  </div>
</div>


<script>
(() => {
  const mapData = JSON.parse(document.getElementById("map-data")?.textContent || "{}");
  const svg = document.getElementById("pacific-map");
  const tooltip = document.getElementById("tooltip");
  const countries = svg.querySelectorAll(".country");

  const COLORS = {
    "Very Strong": "#1aa179",
    "Strong": "#4caf50",
    "Moderate": "#ffc107",
    "Weak": "#dc3545",
    "N/A": "#b9c2cc"
  };

  svg.classList.add("loaded");

  function positionTooltip(e) {
    const offset = 8;
    tooltip.style.position = "fixed";
    const r = tooltip.getBoundingClientRect();
    const vw = window.innerWidth, vh = window.innerHeight;
    let x = e.clientX + offset, y = e.clientY + offset;
    if (x + r.width > vw - 8) x = e.clientX - r.width - offset;
    if (y + r.height > vh - 8) y = e.clientY - r.height - offset;
    x = Math.max(8, Math.min(x, vw - r.width - 8));
    y = Math.max(8, Math.min(y, vh - r.height - 8));
    tooltip.style.left = x + "px";
    tooltip.style.top = y + "px";
  }

  countries.forEach(el => {
    const code = el.id;
    const info = mapData[code];
    const band = info?.band || "N/A";
    el.style.fill = COLORS[band] || COLORS["N/A"];
    el.style.cursor = "pointer";

    el.addEventListener("mouseenter", e => {
      el.classList.add("hover");
      tooltip.innerHTML = `
        <div class="tip-title">${info?.name || code}</div>
        <div class="tip-row"><span class="tip-k">Score</span><span class="tip-v">${info?.score ?? "N/A"}</span></div>
        <div class="tip-row"><span class="tip-k">Band</span><span class="tip-v"><span class="tip-pill">${band}</span></span></div>`;
      tooltip.classList.add("show");
      positionTooltip(e);
    });

    el.addEventListener("mousemove", positionTooltip);
    el.addEventListener("mouseleave", () => tooltip.classList.remove("show"));
    el.addEventListener("click", () => window.location.href = `/country/${code}`);
  });

  
  /* HIT_AREA_BUFFERS */
  // Invisible hit-area buffers for tiny islands (tuned for PLW/FSM/MHL etc).
  // Creates transparent circles behind small shapes and forwards events to the real element.
  try {
    const svgEl = document.getElementById("pacific-map") || document.querySelector("svg#pacific-map") || document.querySelector("svg");
    if (svgEl) {
      const HIT_RADIUS_BY_CODE = {
        // Tiny single islands
        "NRU": 30,
        "TUV": 30,
        "NIU": 30,
        // Small multi-island states
        "PLW": 40,
        "FSM": 40,
        "MHL": 40,
        // Scattered atolls
        "KIR": 52
      };

      const tinyThreshold = 35; // if bbox smaller than this, we add a hit area
      const defaultRadius = 28;

      const targets = svgEl.querySelectorAll(".country[id]");
      targets.forEach(el => {
        const code = (el.id || "").trim().toUpperCase();
        if (!code) return;

        const bbox = el.getBBox();

        // For big shapes, skip unless explicitly in mapping.
        const mapped = HIT_RADIUS_BY_CODE[code];
        const isSmall = (bbox.width < tinyThreshold || bbox.height < tinyThreshold);
        if (!isSmall && !mapped) return;

        const r = mapped || defaultRadius;

        const hit = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        hit.setAttribute("cx", (bbox.x + bbox.width / 2).toString());
        hit.setAttribute("cy", (bbox.y + bbox.height / 2).toString());
        hit.setAttribute("r", r.toString());
        hit.setAttribute("fill", "transparent");
        hit.setAttribute("class", "country-hit");

        // Put the hit circle just BEFORE the real element so the real element still draws on top
        el.parentNode.insertBefore(hit, el);

        ["mouseenter","mouseleave","mousemove","click"].forEach(evt => {
          hit.addEventListener(evt, (e) => {
            const ev = new MouseEvent(evt, {
              bubbles: true,
              cancelable: true,
              clientX: e.clientX,
              clientY: e.clientY,
              screenX: e.screenX,
              screenY: e.screenY,
              ctrlKey: e.ctrlKey,
              shiftKey: e.shiftKey,
              altKey: e.altKey,
              metaKey: e.metaKey,
              button: e.button
            });
            el.dispatchEvent(ev);
          });
        });
      });
    }
  } catch (err) {
    // silent
  }
})();
</script>


<script>
(() => {
  const tooltip = document.getElementById("tooltip");
  let hoverTimer = null;

  document.querySelectorAll(".country").forEach(el => {
    el.addEventListener("mouseenter", e => {
      hoverTimer = setTimeout(() => {
        el.classList.add("hover");
      }, 120);
    });

    el.addEventListener("mouseleave", () => {
      clearTimeout(hoverTimer);
      el.classList.remove("hover");
      tooltip.classList.remove("show");
    });
  });
})();
</script>
</body>

</html>
